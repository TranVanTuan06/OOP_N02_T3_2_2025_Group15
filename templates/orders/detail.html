<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="layout :: body">
<body>
<h2>Đơn hàng <span th:text="${order.maDon}"></span></h2>
<p>Khách: <b th:text="${order.tenKhach}"></b></p>
<p>Ghi chú: <span th:text="${order.ghiChu}">-</span></p>

<h3>Thêm món</h3>
<form th:action="@{'/orders/' + ${order.maDon} + '/items'}" method="post">
  <input type="text" name="tenMon" placeholder="Cà phê sữa" required>
  <input type="number" name="soLuong" min="1" value="1" required>
  <input type="number" step="0.01" name="donGia" placeholder="20000" required>
  <input type="text" name="ghiChu" placeholder="ít đá">
  <button type="submit">Thêm</button>
</form>

<h3>Chi tiết</h3>
<table>
  <thead>
  <tr><th>Tên món</th><th>SL</th><th>Đơn giá</th><th>Thành tiền</th></tr>
  </thead>
  <tbody>
  <tr th:each="ct : ${order.chiTiet}">
    <td th:text="${ct.tenMon}"></td>
    <td th:text="${ct.soLuong}"></td>
    <td th:text="${ct.donGia}"></td>
    <td th:text="${ct.tinhTien()}"></td>
  </tr>
  </tbody>
</table>

<p><b>Tổng tiền: </b><span th:text="${order.tinhTongTien()}"></span> VND</p>

<p><a th:href="@{/orders}">← Về danh sách</a></p>
</body>
</html>
