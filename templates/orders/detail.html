<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head><meta charset="utf-8"><title>Chi tiết đơn</title></head>
<body>
<h2>Đơn <span th:text="${order.maDon}"></span></h2>
<p>Khách: <b th:text="${order.tenKhach}"></b></p>
<p>Ghi chú: <span th:text="${order.ghiChu}">-</span></p>

<h3>Thêm món</h3>
<form th:action="@{'/orders/' + ${order.maDon} + '/items'}" method="post">
  <input name="tenMon" placeholder="Cà phê sữa" required>
  <input name="soLuong" type="number" min="1" value="1" required>
  <input name="donGia" type="number" step="0.01" min="0" placeholder="20000" required>
  <input name="ghiChu" placeholder="ít đá">
  <button type="submit">Thêm</button>
</form>

<h3>Chi tiết</h3>
<table border="1" cellpadding="6">
  <tr><th>Tên món</th><th>SL</th><th>Đơn giá</th><th>Thành tiền</th></tr>
  <tr th:each="ct : ${order.chiTiet}">
    <td th:text="${ct.tenMon}"></td>
    <td th:text="${ct.soLuong}"></td>
    <td th:text="${ct.donGia}"></td>
    <td th:text="${ct.tinhTien()}"></td>
  </tr>
</table>

<p><b>Tổng:</b> <span th:text="${order.tinhTongTien()}"></span> VND</p>

<form th:action="@{'/orders/' + ${order.maDon} + '/delete'}" method="post">
  <button type="submit" onclick="return confirm('Xóa đơn này?')">Xóa đơn</button>
</form>

<p><a th:href="@{/orders}">← Về danh sách</a></p>
</body>
</html>
